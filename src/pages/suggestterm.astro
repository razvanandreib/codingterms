---
import LayoutSuggest from "../layouts/LayoutSuggest.astro";
---

<LayoutSuggest title="Suggest a term" description="Suggest a term ">
  <section class="contact-formular">
    <p>Didnt find a term? Complete the from below to add into our database</p>
    <div class="contact-formular-wrapper">
      <form id="contact-form">
        <input type="hidden" name="contact_number" class="inserttext" />

        <div class="contact-form__name-mail">
          <input
            type="text"
            name="user_name"
            required
            class="inserttext"
            placeholder="Nume si prenume *"
          />
          <input
            type="email"
            name="user_email"
            required
            class="inserttext"
            placeholder="Adresa de e-mail *"
          />
        </div>
        <div class="contact-form__tel-website">
          <input
            type="tel"
            name="user_number"
            class="inserttext"
            placeholder="Numar de telefon"
          />
          <input
            type="text"
            name="user_website"
            required
            placeholder="Website *"
          />
        </div>
        <div id="contact-form__submit">
          <textarea
            name="message"
            required
            class="inserttext"
            placeholder="Mesajul pe care vrei sa ni-l transmiti"></textarea>
          <button class="btn" type="submit" value="Send">Trimite</button>
        </div>
      </form>
    </div>
  </section>
</LayoutSuggest>

<script lang="javascript" type="module" defer async>
  import "https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js";

  (function () {
    emailjs.init("jZmqh2eWmXK2TpxEs");
  })();

  let resetForm = document.getElementById("contact-form");
  window.onload = function () {
    document
      .getElementById("contact-form")
      .addEventListener("submit", function (event) {
        event.preventDefault();
        this.contact_number.value = (Math.random() * 100000) | 0;
        emailjs.sendForm("service_k9evnkn", "contact_form", this).then(
          function () {
            console.log("SUCCESS!");
          },
          function (error) {
            console.log("FAILED...", error);
          }
        );
        resetForm.reset();
      });
  };
</script>
<style lang="scss">
  @use "../styles/abstracts/index.scss" as *;
  .contact-formular {
    @include flex-center;
    margin: 10rem 0;
  }

  .contact-formular-wrapper {
    @include flex-center;
    gap: 4rem;
  }

  #contact-form {
    max-width: 55rem;
    width: 100%;
  }

  .contact-form {
    &__name-mail {
      @include flex;
      gap: 2rem;
      > input {
        @include contact-input;
      }
      > input:focus {
        @include contact-input-focused;
      }
    }
    &__tel-website {
      @include flex;
      gap: 2rem;

      > input {
        @include contact-input;
      }

      > input:focus {
        @include contact-input-focused;
      }
    }
  }

  #contact-form {
    margin: 1rem;
    &__submit {
      > textarea {
        @include textarea-input;
      }
      > textarea:focus {
        @include contact-input-focused;
      }
    }
  }

  .contact-formular__text {
    @include flex;
    flex-direction: column;
    margin: 1rem;
    max-width: 55rem;
    width: 100%;
    > img {
      width: 4rem;
      height: 4rem;
    }
    > h4 {
      @include h4-contact;
    }
    > hr {
      width: 10rem;
      height: 3px;
      border: none;
      background-color: #e180b0;
    }
    > p {
      margin: 2rem 0 0 0;
    }
    > p:nth-of-type(2) {
      font-size: 2rem;
      margin: 2rem 0 0 0;
      font-weight: 400;
    }
    > a {
      font-size: 2.5rem;
      font-weight: bolder;
      background: linear-gradient(30deg, #3789e6, #e180b0);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
  }

  @media (max-width: 900px) {
    .contact-formular-wrapper {
      flex-wrap: wrap;
    }
  }
</style>
